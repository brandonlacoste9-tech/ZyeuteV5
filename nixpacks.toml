[phases.setup]
nixPkgs = ["nodejs-22_x", "npm-10_x"]

[phases.install]
cmds = [
  "npm ci --include=optional",
  "npm install @rollup/rollup-linux-x64-gnu --force",
  "npm install lightningcss-linux-x64-gnu --force",
  "npm install @tailwindcss/oxide-linux-x64-gnu --force",
  "npm install @esbuild/linux-x64 --force"
]

[phases.build]
cmds = [
  "bash scripts/railway-build.sh"
]

[start]
cmd = "npm start"